---
layout: post
title:  "计数问题笔记"
date:   2018-07-28 12:00:00 +0800
categories: 数学
---


## 计数问题概述

### 常用方法小结

一、十六字方针(基本方法)

枚举、树形图、标数法、分类分步、排列组合

二、常用方法(10大方法)

插空、捆绑、排除、容斥、隔板、定序、分排、特殊优先、先选后排、递推

### 典型例题

#### 插空法

* 6个人站成一排，甲不站在左端也不站在右端，请问有多少种站法？(插空法)

解：

$$A^5_5 \cdot C^1_4 = 120 \times 4 = 480(种)$$

答：有480种站法。

* 7个人站成一排，小明不在正中间，请问有多少种站法？(插空法)

解：

$$A^6_6 \cdot C^1_6 = 720 \times 6 = 4320(种)$$

答案：有4320种站法。

* 晚会节目有4个舞蹈，2个相声，3个独唱，其中舞蹈不能连续出场，请问这些节目有多少种排序方法？(插空法)

解：

$$A^5_5 \cdot A^4_6 = 120 \times \frac{6!}{2!} = 120 \times 720 \div 2 = 43200(种)$$

注：先排2个相声和3个独唱；然后在这5个节目之间有4个空隙，前后还有两个位置，共6个位置；从这6个位置中选择4个给舞蹈，并对4个舞蹈节目进行排序。

答：这些节目有4320种排序方法。

* 节目表上原有5个节目，现在保持已有节目顺序不变，再添进去2个新节目，且这两个新节目不相邻，请问有多少种添法？(插空法)

解：

$$P^2_6 = 6 \times 5 = 30(种)

注：5个节目有4个间隙，加上前后2个位置，共6个位置；从这6个位置中取出2个位置，再对2个新节目进行排序。

答：有30种添法。

* 节目表上原有4个节目，现在保持已有节目顺序不变，再添进去2个新节目，请问有多少种添法？(插空法)

解：

$$C^1_5 \cdot C^1_6 = 5 \times 6 = 30(种)$$

答：有30种添法。

### 捆绑法

* 三男四女坐成一排照相，甲乙两人必须相邻，请问有多少种坐法？(捆绑法)

解：

$$A^6_6 \cdot A^2_2 = 720 \times 2 = 1440(种)$$

答：有1440种坐法。

* 7个人站成一排，甲乙必须相邻，丙丁必须相邻，请问有多少种站法？(捆绑法)

解：

$$A^5_5 \cdot P^2_2 \cdot P^2_2 = 120 \times 2 \times 2=480(种)$$

答：有480种站法。

### 排除法

* 从6个男生、5个女生中选出3人去做值日，请问至少有1个女生的选法有多少种？(排除法)

解：

$$A^3_{11}-A^3_6 = 11 \times 10 \times 9 - 6 \times 5 \times 4 = 990 - 120 = 870(种)$$

注：只需从全部选法中扣除全是男生的选法。

答：有870种选法。

### 容斥原理

* 四班有40名学生，其中有25人参加数学小组，23人参加书法小组，有19人两个小组都参加了，请问有多少人两个小组都没参加？(容斥原理-两集合容斥)

解：

(韦恩图略)

40-(25+23-19)=11(人)

答：有11人两个小组都没参加。

* 某校36名同学参加数学竞赛，答对第一题的有25人，答对第二题的有20人，两题都答对的有15人，请问两题都没答对有多少人？(容斥原理)

解：

36-(25+20-15)=6(人)

答：两题都没答对的有6人。

* 某班学生手中分别拿着红、黄、蓝三色小球，已知手中有红球的共有34人，有黄球的有26人，有蓝球的有18人，其中手中有红、黄蓝三种球的有6人，只有红黄两种球的有9人，只有黄蓝两种球的有4人，只有红蓝两种球的有3人，请问这个班有多少人？(容斥原理-三集合容斥)

解：

(韦恩图略)

34+26+18-9-4-3+6=68(人)

答：这个班有68人。

* 某班有学生45人，每人暑假都参加了体育训练队，其中参加足球队的有25人，参加排球队的有22人，参加游泳队的有24人，足球、排球都参加的有12人，足球、游泳都参加的有9人，排球、游泳都参加的有8人，请问三项都参加的有多少人？(容斥原理-三集合容斥)

解：

(韦恩图略)

设三项都参加的有$$x$$人

$$25+22+24-12-9-8+x=45$$

$$x=3$$

答：三项都参加的有3人。

### 隔板法

* 10个苹果分给4个人，每人至少1个，请问有多少种分法？(隔板法)

解：

$$C^3_9 = (9 \times 8 \times 7) \div (3 \times 2 \times 1) = 84(种)$$

答：有84种分法。

* 10个一样的桔子放到3个不同的盘中，不允许盘子空着，请问有多少种放法？(隔板法)

解：

$$C^2_9 = (9 \times 8) \div (2 \times 1) = 36(种)$$

答：有36种放法。

注：是否正确？

* 从8个班选12个三好学生，每班至少1人，请问有多少种选法？(隔板法)

解：

$$C^7_11 = C^4_11 = (11 \times 10 \times 9 \times 8) \div (4 \times 3 \times 2 \times 1) = 330(种)

答：有330种选法。

### 定序问题

* 7个人排队，其中甲乙丙这三人顺序一定，请问有多少种排法？(定序问题)

解：

$$A^7_7 \div A^3_3 = 840 \div 6 = 140(种)

答：有140种排法。

* 10个人身高各不相同，排成前后两排，每排5人，要求每排从左至右身高逐渐增加，请问有多少种排法？(定序问题)

解：

$$C^5_{10} = \frac{10 \times 9 \times 8 \times 7 \times 6}{5 \times 4 \times 3 \times 2 \times 1} = 252$$

注：只需选出前排5人，然后前后排都按高矮顺序排队即可。

答：有252种排法。

### 分排问题

* 8个人排成前后两排，每排4人，其中甲乙站前排，丙站后排，请问有多少种站法？(分排问题)

解：

$$A^2_4 \cdot C^1_4 \cdot A^5_5 = 12 \times 4 \times 120 = 5760(种)$$

答：有5760种站法。

### 特殊优先

* 由0，1，2，3，4，5可以组成多少个没有重复数字的五位奇数？(特殊优先)

解：

$$C^1_3 \cdot C^1_4 \cdot A^3_4 = 3 \times 4 \times 24 = 288(个)$$

注：先选个位，只能从3个奇数中选；再选万位，不能选0，还有4个选择；剩余的4个数中选出3个进行排列。

答：这样的数有288个。

* 从0，2中选一个数字，从1，3，5中选两个数字，组成无重复数字的三位数，请问其中有多少个奇数？(特殊优先)

解：

$$C^1_3 \cdot (C^1_2 \cdot A^2_2 + C^1_2) = 3 \times 2 \times 2 \times 2 = 18(个)$$

注：先选个位的奇数，然后选择2或选择0，选2时剩余两个数字要排列，选0时剩余两个数字不排列(0不能在最高位百位，只能在十位)。

答：有18个奇数。

* 没有重复的三位数中，三个数位上的数字从左往右分别大于2，6，4的数有多少个？(特殊优先)

解：

$$(9-6) \times (9-4-1) \times (9-2-2) = 3 \times 4 \times 5 = 60(个)$$

注：6最大，从6开始计数，然后是4，最后是2。

答：这样的数有60个。

### 先选后排

* 5个不同的小球，装入4个不同的盒中，每个盒中至少装一个小球，请问有多少种装法？(先选有排)

解：

$$C^2_5 \cdot A^4_4 = \frac{5 \times 4}{2 \times 1} \times 24 = 240(种)$$

注：有一个盒中有2球，其他盒中有一球，因此可以先把两球选出来，再把这两球作为一个整体，和其他三球一起排列。

答：有240种装法。

### 递推法

* 有10级台阶，每次上一级或两级，请问有多少种走法？

解：

有1级台阶时，有1种走法；有2级台阶时，有2种走法；有3级台阶时，有3种走法；有4级台阶时，有5种走法；……

发现规律：F(n) = F(n-1) + F(n-2)，即斐波那契数列：

1，2，3，5，8，13，21，44，65，89

所以10级台阶时有89种走法。

答：有89种走法。


## 加法原理

分类相加。

注：属于“分类计数”。

要求：不重、不漏。


## 乘法原理

分步相乘。


## 排列组合

### 排列组合基本公式

$$A^m_n = n \times (n-1) \times (n-2) \times \cdots \times (n-m+1) = \frac{n!}{(n-m)!}$$

$$C^m_n = \frac{m \times (n-1) \times (n-2) \times \cdots \times (n-m+1)}{m \times (m-1) \times (m-2) \times \cdots \times 1} = \frac{n!}{m!(n-m)!}$$

$$C^m_n = C^{n-m}_n$$

### 排列组合应用

(1) 有1、2、3、4四张卡片，每次取出3张组成三位数。请问其中有几个偶数。

答案：先取个位的偶数，有2种选择；再取10位，有3种选择；最后取百位，有2种选择。$$2×3×2=12(个)$$。

(2) 数字0、1、2、3、4可以组成几个三位数？

答案：共5个数字。百位只能从1、2、3、4这4个数字中选取，接下来十位、个位都可以从全部5个数字中选取。$$4×5×5=100(个)$$。

(3) 数字0、1、2、3、4可以组成几个没有重复数字的三位数？

答案：共5个数字。百位只能从1、2、3、4这4个数字中选取，接下来十位只能从剩余4个数字中选取，个位只能从剩余3个数字中选取。$$4×4×3=48(个)$$。

#### 隔板法

(1) 从8个班中选12名三好学生，每班至少1名，请问共有多少种名额分配方案？

答案：8个班需要7个隔板，12名三好学生有11个间隔。分配方案共有$$C^7_11=C^4_11=\frac{11×10×9×8}{4×3×2×1}=330(种)$$。

(2) 把10个一样的桔子放到3个不同的盘子里，盘子不能空着，请问共有多少种放法？

答案：3个盘子需要2个隔板，10个桔子有9个间隔。放法共有$$C^2_9=\frac{9×8}{2×1}=36(种)$$。

#### 捆绑法

(1) 三男四女坐成一排照相，甲乙两人必须相邻，请问有多少种坐法？

答案：共7人。先把甲乙两人看作一个整体，相当于6人排序问题，$$A^6_6=6!=720(种)$$。再考虑甲乙两人又有两种坐法。共有坐法$$720×2=1440(种)$$。


## 容斥原理

逐步淘汰。

注：属于“分类计数”。

容斥原理是组合计数领域中最核心的原理之一。

### 容斥原理的内容

#### 双重叠问题(容斥原理I)

$$A∪B=A+B-A∩B$$

说明：重叠部分重复计算了1次，需要扣除。

#### 三重叠问题(容斥原理II)

$$A∪B∪C=A+B+C-A∩B-B∩C-C∩A+A∩B∩C$$

### 容斥原理和加法原理的关系

考虑极限情况：当不存在重叠部分时，容斥原理就变成了加法原理。因此，加法原理是容斥原理的特殊情况，容斥原理是加法原理的一般推广。

### 容斥原理的一般解题步骤

“容斥”就是“包容”和“排斥”。首先计算包容，如果包容过多，就要进行排斥；如果排斥过多，又要进行包容；重复这个过程，直到得到最终结果。

### 容斥原理应用

#### 双重叠问题

(1) 全班48人，37人完成了语文作业，42人完成了数学作业。请问有几人同时完成了语文和数学作业？

解：根据韦恩图可知，同时完成语文和数学作业的有$$37+42-48=31(人)$$。

注：相当于知道$$A$$、$$B$$和$$A∪B$$，求$$A∩B$$。

(2) 56名同学学习乐器，学习小提琴的有40人，学习钢琴的有30人。请问两种乐器都学习的有几人？只学习小提琴的有几人？

解：两种乐器都学习的有$$40+30-56=14(人)$$。只学习小提琴的有$$40-14=26(人)$$。

(3) 100以内不是3或5的倍数的正整数有几个？

解：100以内3的倍数有3到99共33个，5的倍数有5到100共20个，3和5的公倍数有15到90共6个，所以不是3或5的倍数的有$$100-(33+20-6)=53(个)$$。

注：$$33+20-6=47$$是3或5的倍数的集合的元素个数。

#### 三重叠问题

(1) 学校举行演讲比赛，获奖同学中有24名不是五年级的，有22名不是六年级的，五、六年级获奖同学共有10名。请问其他年级获奖同学共有几名？

解：设获奖同学五年级有A名，六年级有B名，其他年级有C名，则$$B+C=24$$，$$A+C=22$$，$$A+B=10$$。通过加减消元法(或容斥原理)可得$$C=18$$。

(2) 全班同学至少喜欢语、数、英三门中的一门，其中30人喜欢语文，32人喜欢数学，21人喜欢英语，15人既喜欢语文又喜欢数学，14人既喜欢数学又喜欢英语，12人既喜欢语文又喜欢英语，8人三门都喜欢。请问全班有多少人？

解：设喜欢语文的有A人，喜欢数学的有B人，喜欢英语的有C人，则$$A=30$$，$$B=32$$，$$C=21$$，$$A∩B=15$$，$$B∩C=14$$，$$A∩C=12$$，$$A∩B∩C=8$$。根据容斥原理II，全班有$$A∪B∪C=A+B+C-A∩B-B∩C-C∩A+A∩B∩C=30+32+21-15-14-12+8=50(人)$$。


## 递推方程


## 波利亚计数公式
